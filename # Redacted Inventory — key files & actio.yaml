# Redacted Inventory — key files & actions

- File: [whatsapp/.env](whatsapp/.env#L1-L20)
  - Contains: WHATSAPP_TOKEN, SUPABASE_ANON_KEY, SUPABASE_SERVICE_KEY, ADMIN_PASSWORD, WEBHOOK_HMAC_SECRET
  - Risk: CRITICAL — rotate and remove from repo
  - Action: remove file from tracking, rotate keys, store in Vercel/Supabase secrets

- File: [whatsapp/VERCEL_ENV.md](whatsapp/VERCEL_ENV.md#L1-L120)
  - Purpose: Vercel env guidance; ensure values match final Supabase & MCP endpoints

- File: [whatsapp/src/server-bulletproof.js](whatsapp/src/server-bulletproof.js#L80-L170)
  - Purpose: webhook GET verification + POST handler
  - Action: ensure HMAC verification enforced on POST

- File: [whatsapp/src/whatsapp-commands.js](whatsapp/src/whatsapp-commands.js#L40-L180)
  - Purpose: subscription & commands handling (writes to `subscriptions`)
  - Action: confirm subscription schema -> proposed taxonomy

- File: [whatsapp/src/broadcast-hybrid.js](whatsapp/src/broadcast-hybrid.js#L1-L120)
  - Purpose: broadcast selection & send logic
  - Action: require cost estimation + two-step confirmation

- File: [whatsapp/test-complete-flow.js](whatsapp/test-complete-flow.js#L1-L200)
  - Purpose: E2E test for `moment_intents` and publish flow
  - Use: staging verification

- File: [whatsapp/test-subscriber-flow.js](whatsapp/test-subscriber-flow.js#L1-L140)
  - Purpose: opt-in/out test for `subscriptions`

- File: [whatsapp/debug-webhook.sh](whatsapp/debug-webhook.sh#L1-L40)
  - Purpose: webhook tester (some references to old Railway URL)
  - Action: update to staging target before running tests

- Files referencing DB/migrations: `whatsapp/test-campaigns.js`, `whatsapp/verify-campaigns.js`, `supabase/*.sql` (ensure migrations applied)